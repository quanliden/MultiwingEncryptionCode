clc; clear all; close all;

P = imread("04.png");
imshow(P)
P = double(P);
[M,N] = size(P);
MN = M*N;

rng(1);
r1 = rand(1,M);
r2 = rand(1,N);
r3 = rand(1,MN);
r4 = rand(1,MN);
[~,K1] = sort(r1);
[~,K2] = sort(r2);
[~,K3] = sort(r3);
[~,K4] = sort(r4);
par = [1,1,1];
D1 = Diff1(P,K3,par)
D1 = Peumu(D1,K1,K2);
iD1 = invPeumu(D1,K1,K2);
% par = round(255*rand(1,3));
% par = [1,1,1];
% D1 = Diff2(P,K1,par,MN);
% iD1 = invDiff2(D1,K1,par,MN);
% 
d1 = reshape(D1,M,N);
figure
imshow(uint8(d1))
id1 = reshape(iD1,M,N);
figure
imshow(uint8(id1))
